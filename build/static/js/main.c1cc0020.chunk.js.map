{"version":3,"sources":["js/notification.js","js/App.js","index.js"],"names":["Notification","props","closeNotification","event","preventDefault","instance","current","remove","React","createRef","className","ref","this","href","onClick","value","Component","App","captureFile","files","target","FileReader","length","fileReader","onload","imageRef","src","result","readAsArrayBuffer","buttonRef","style","display","console","log","setState","image","hash","readAsDataURL","submitFile","binary","bytes","Uint8Array","state","len","byteLength","i","String","fromCharCode","fetch","method","headers","body","JSON","stringify","window","btoa","then","response","json","text","hashOutput","innerHTML","notifications","account","title","element","ReactDOM","render","htmlFor","id","type","onChange","StrictMode","document","getElementById"],"mappings":"oMAuBeA,E,kDApBX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAIVC,kBAAoB,SAACC,GACjBA,EAAMC,iBACN,EAAKC,SAASC,QAAQC,UALtB,EAAKF,SAAWG,IAAMC,YAFP,E,0CAUtB,WACC,OACU,sBAAKC,UAAU,wBAAwBC,IAAKC,KAAKP,SAAjD,UACI,mBAAGQ,KAAK,IAAIH,UAAU,QAAQI,QAASF,KAAKV,oBAC3CU,KAAKX,MAAMc,a,GAfDC,aC+GZC,G,wDA1Gd,WAAYhB,GAAQ,IAAD,8BAClB,cAAMA,IAaNiB,YAAc,SAACf,GACfA,EAAMC,iBACN,IACCe,EADYhB,EAAMiB,OACHD,MAEhB,GAAIE,YAAcF,GAASA,EAAMG,OAAQ,CACxC,IAAIC,EAAa,IAAIF,WACrBE,EAAWC,OAAS,WACP,EAAKC,SAASnB,QACpBoB,IAAMH,EAAWI,OAEvBJ,EAAWK,kBAAkBT,EAAM,IACnCI,EAAWC,OAAS,WACnB,EAAKK,UAAUvB,QAAQwB,MAAMC,QAAU,QACvCC,QAAQC,IAAIV,EAAWI,QACvB,EAAKO,SAAS,CACbC,MAAOZ,EAAWI,OAClBS,KAAM,SAITb,EAAWc,cAAclB,EAAM,MAnCd,EAuCnBmB,WAAa,SAACnC,GACbA,EAAMC,iBAKN,IAHA,IAAImC,EAAS,GACTC,EAAQ,IAAIC,WAAW,EAAKC,MAAMP,OAClCQ,EAAMH,EAAMI,WACPC,EAAI,EAAGA,EAAIF,EAAKE,IACxBN,GAAUO,OAAOC,aAAcP,EAAOK,IAGvCG,MAAM,4BAA6B,CAClCC,OAAQ,OACRC,QAAS,CACP,eAAgB,kCAElBC,KAAMC,KAAKC,UAAU,CACpBlB,MAAOmB,OAAOC,KAAKhB,OAElBiB,MAAK,SAAAC,GACP,OAAOA,EAASC,UACdF,MAAK,SAAAL,GACPnB,QAAQC,IAAIkB,EAAKQ,MACjB,EAAKC,WAAWtD,QAAQuD,UAAYV,EAAKQ,KACzC,EAAKzB,SAAS,CACbC,MAAO,EAAKO,MAAMP,MAClBC,KAAMe,EAAKQ,OAEZ,EAAKC,WAAWtD,QAAQwB,MAAMC,QAAU,QACxC,EAAKF,UAAUvB,QAAQwB,MAAMC,QAAU,UAGxCC,QAAQC,IAAIqB,OAAOC,KAAKhB,KApExB,EAAKd,SAAWjB,IAAMC,YACtB,EAAKoB,UAAYrB,IAAMC,YACvB,EAAKmD,WAAapD,IAAMC,YACxB,EAAKqD,cAAgBtD,IAAMC,YAE3B,EAAKiC,MAAQ,CACZP,MAAO,KACPC,KAAM,KACN2B,QAAS,MAVQ,E,sDAyEnB,SAAmBC,GAClB,IAAMC,EAAU,cAAC,EAAD,CAAclD,MAAOiD,IACrCE,IAASC,OAAOF,EAASrD,KAAKkD,cAAcxD,W,oBAG7C,WACC,OACA,sBAAKI,UAAU,iBAAf,UACC,sBAAKA,UAAU,cAAf,UACC,qBAAKA,UAAU,eAAf,wBAGA,qBAAKA,UAAU,6BAAf,SACC,qBAAKA,UAAU,qBAAqBC,IAAKC,KAAKa,SAAUC,IAAI,mEAE7D,sBAAKhB,UAAU,+BAAf,UACC,uBAAO0D,QAAQ,cAAc1D,UAAU,qBAAvC,oEAGA,uBAAO2D,GAAG,cAAcC,KAAK,OAAO5D,UAAU,sBAAsB6D,SAAU3D,KAAKM,cACnF,wBAAQR,UAAU,6BAA6BC,IAAKC,KAAKiB,UAAWf,QAASF,KAAK0B,WAAlF,6EAID,qBAAK5B,UAAU,2BAA2BC,IAAKC,KAAKgD,gBAErD,qBAAKlD,UAAU,gBAAgBC,IAAKC,KAAKkD,uB,GApG1B9C,cCFlBkD,IAASC,OACP,cAAC,IAAMK,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.c1cc0020.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass Notification extends Component {\n    constructor(props) {\n        super(props);\n        this.instance = React.createRef();\n    }\n\n    closeNotification = (event) => {\n        event.preventDefault();\n        this.instance.current.remove();\n    }\n\n\trender() {\n\t\treturn (\n            <div className=\"notifications__pop-up\" ref={this.instance}>\n                <a href=\"#\" className=\"close\" onClick={this.closeNotification}></a>\n                {this.props.value}\n            </div>\t\t\n\t\t);\n\t}\n}\n\nexport default Notification;","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Notification from \"../js/notification\";\nimport '../styles/main.scss';\n\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.imageRef = React.createRef();\n\t\tthis.buttonRef = React.createRef();\n\t\tthis.hashOutput = React.createRef();\n\t\tthis.notifications = React.createRef();\n\n\t\tthis.state = {\n\t\t\timage: null,\n\t\t\thash: null,\n\t\t\taccount: null\n\t\t};\n\t}\n\n  captureFile = (event) => {\n\t\tevent.preventDefault();\n\t\tlet target = event.target,\n\t\t\tfiles = target.files;\n\n\t\tif (FileReader && files && files.length) {\n\t\t\tlet fileReader = new FileReader();\n\t\t\tfileReader.onload = () => {\n\t\t\t\tlet image = this.imageRef.current;\n\t\t\t\timage.src = fileReader.result;\n\n\t\t\t\tfileReader.readAsArrayBuffer(files[0]);\n\t\t\t\tfileReader.onload = () => {\n\t\t\t\t\tthis.buttonRef.current.style.display = \"block\";\n\t\t\t\t\tconsole.log(fileReader.result)\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\timage: fileReader.result,\n\t\t\t\t\t\thash: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfileReader.readAsDataURL(files[0]);\n    \t}\n  \t}\n\n\tsubmitFile = (event) => {\n\t\tevent.preventDefault()\n\t\n\t\tlet binary = '';\n\t\tlet bytes = new Uint8Array(this.state.image);\n\t\tvar len = bytes.byteLength;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tbinary += String.fromCharCode( bytes[ i ] );\n\t\t}\n\n\t\tfetch('http://okto.pw:8080/image', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t  'Content-Type': 'application/json;charset=utf-8',\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\timage: window.btoa(binary),\n\t\t\t}),\n\t\t}).then(response => {\n\t\t\treturn response.json();\n\t\t}).then(body => {\n\t\t\tconsole.log(body.text);\n\t\t\tthis.hashOutput.current.innerHTML = body.text;\n\t\t\tthis.setState({\n\t\t\t\timage: this.state.image,\n\t\t\t\thash: body.text\n\t\t\t});\n\t\t\tthis.hashOutput.current.style.display = \"block\";\n\t\t\tthis.buttonRef.current.style.display = \"none\";\n\t\t});\n\n\t\tconsole.log(window.btoa(binary));\n\t}\n\n\tcreateNotification(title) {\n\t\tconst element = <Notification value={title}/>;\n\t\tReactDOM.render(element, this.notifications.current);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<div className=\"main-container\">\n\t\t\t<div className=\"form-holder\">\n\t\t\t\t<div className=\"project-name\">\n\t\t\t\t\tKonami App\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-holder__image-wrapper\">\n\t\t\t\t\t<img className=\"form-holder__image\" ref={this.imageRef} src=\"https://pro-spo.ru/images/stories/2014/elitefon.ru-38277.jpg\"></img>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-holder__buttons-wrapper\">\n\t\t\t\t\t<label htmlFor=\"file-upload\" className=\"form-holder__label\">\n\t\t\t\t\t\tЗагрузить\n\t\t\t\t\t</label>\n\t\t\t\t\t<input id=\"file-upload\" type=\"file\" className=\"form-holder__button\" onChange={this.captureFile}/>\n\t\t\t\t\t<button className=\"form-holder__submit-button\" ref={this.buttonRef} onClick={this.submitFile}>\n\t\t\t\t\t\tОбработать\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-holder__hash-output\" ref={this.hashOutput}></div>\n\t\t\t</div>\n\t\t\t<div className=\"notifications\" ref={this.notifications}>\n\t\t\t</div>\n\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}